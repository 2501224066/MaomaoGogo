<div class="row">
    <div class="col-md-8" id="left">
        <div class="panel">
            <div class="panel-heading">
                <ol class="breadcrumb">
                    <li><a href="/">主页</a></li>
                    <li><a href="/info">个人中心</a></li>
                    <li>编辑个人资料</li>
                </ol>
            </div>
            <div class="panel-body row">
                <form action="/info_update" method="POST" class="col-md-8 col-md-offset-2">
                    {{ .xsrfdata }}
                    <div class="form-group">
                        <label for="l1"><i class="fa fa-address-card-o fa-fw"></i> 昵称</label>
                        <input type="text" name="nickname" class="form-control" id="l1" placeholder="Nickname"
                            maxlength="10" value="{{ .User.Nickname }}">
                    </div>
                    <div class="form-group">
                        <label for="l3"><i class="fa fa-dot-circle-o fa-fw"></i> 简介</label>
                        <input type="text" name="in_short" class="form-control" id="l3" placeholder="InShort"
                            maxlength="20" value="{{ .User.InShort }}">
                    </div>
                    <div class="form-group">
                        <label for="l4"><i class="fa fa-venus-mars fa-fw"></i> 性别</label>
                        <select name="sex" class="form-control" id="l4">
                            <option {{ if eq .User.Sex "男" }} selected="selected" {{ end }} name="男">男</option>
                            <option {{ if eq .User.Sex "女" }} selected="selected" {{ end }} name="女">女</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="l5"><i class="fa fa-birthday-cake fa-fw"></i> 生日</label>
                        <div class="input-group date check_time1" data-date="1979-09-16" data-date-format="yyyy-mm-dd"
                            data-link-field="dtp_input1">
                            <input type="text" name="birthday" class="form-control" id="l5"
                                value='{{ date .User.Birthday "Y-m-d" }}' maxlength="16" readonly>
                            <span class="input-group-addon"><span class="glyphicon glyphicon-remove"></span></span>
                            <span class="input-group-addon"><span class="glyphicon glyphicon-th"></span></span>
                        </div>
                        <input class="form-control" type="hidden" id="dtp_input1" /><br />
                    </div>
                    <div class="form-group">
                        <label for="l6"><i class="fa fa-minus-square fa-fw"></i> 详细介绍</label>
                        <textarea type="text" rows="3" name="introduce" class="form-control" id="l6" maxlength="200"
                            placeholder="Introduce">{{ .User.Introduce }}</textarea>
                    </div>
                    <br>
                    <button type="submit" class="btn btn-primary btn-block">提交</button>
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    $('.check_time1').datetimepicker({
        autoclose: 1,
        minView: 2,
    });

    $('form').bind('submit', function () {
        var tmp = ajaxSubmit(this, function () {
            if (tmp.responseJSON.status) {
                $("#alert").html('<div class="text-center alert alert-success" role="alert"><strong>SUCCESS! </strong><br>' + tmp.responseJSON.msg + '</div>')
                window.setTimeout(function () {
                    window.location.href = "/info"
                }, 1000);
            } else {
                $("#alert").html('<div class="text-center alert alert-danger" role="alert"><strong>ERROR! </strong><br>' + tmp.responseJSON.msg + '</div>')
            }
        })
        return false;
    })
</script>